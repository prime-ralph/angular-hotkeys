/*! 
 * angular-hotkeys v1.7.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(a){this.includeCheatSheet=!0,this.defaultCategoryName="Generic",this.useNgRoute=a.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><div class="cfp-hotkeys-category-container"><table ng-repeat="(categoryName,hotkeysInCategory) in categories"><tbody><tr ng-if="numCategories > 1"><td class="cfp-hotkeys-category-title" colspan="2">{{categoryName}}</td></tr><tr ng-repeat="hotkey in hotkeysInCategory | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span class="cfp-hotkeys-key" ng-repeat="key in hotkey.format() track by $index">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table></div><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(a,b,c,d,e){function f(){r=!1}function g(){r=!0}function h(a){var b={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"⏎",backspace:"⌫"};a=a.split("+");for(var c=0;c<a.length;c++)"mod"===a[c]&&(d.navigator&&d.navigator.platform.indexOf("Mac")>=0?a[c]="command":a[c]="ctrl"),a[c]=b[a[c]]||a[c];return a.join(" + ")}function i(a,b,c,d,e,f,g){this.combo=a instanceof Array?a:[a],this.description=b,this.callback=c,this.action=d,this.allowIn=e,this.persistent=f,this.category=g,this._formated=null}function j(){for(var a=s.hotkeys.length;a--;){var b=s.hotkeys[a];b&&!b.persistent&&n(b)}}function k(){s.categories={},s.numCategories=0;for(var a=0;a<s.hotkeys.length;++a){var b=s.hotkeys[a],c=b.category;s.categories[c]||(s.categories[c]=[],++s.numCategories),s.categories[c].push(b)}}function l(){s.helpVisible=!s.helpVisible,s.helpVisible?(k(),x=o("esc"),n("esc"),m("esc",x.description,l,null,["INPUT","SELECT","TEXTAREA"])):(n("esc"),x!==!1&&m(x))}function m(a,b,c,d,e,f,g){var h,j=["INPUT","SELECT","TEXTAREA"],k=Object.prototype.toString.call(a);if("[object Object]"===k&&(b=a.description,c=a.callback,d=a.action,f=a.persistent,e=a.allowIn,g=a.category,a=a.combo),n(a),b instanceof Function?(d=c,c=b,b="$$undefined$$"):angular.isUndefined(b)&&(b="$$undefined$$"),g||(g=s.defaultCategoryName),void 0===f&&(f=!0),"function"==typeof c){h=c,e instanceof Array||(e=[]);for(var l,m=0;m<e.length;m++)e[m]=e[m].toUpperCase(),l=j.indexOf(e[m]),-1!==l&&j.splice(l,1);c=function(a){var b=!0;if(a){var c=a.target||a.srcElement,d=c.nodeName.toUpperCase();if((" "+c.className+" ").indexOf(" mousetrap ")>-1)b=!0;else for(var e=0;e<j.length;e++)if(j[e]===d){b=!1;break}}b&&q(h.apply(this,arguments))}}"string"==typeof d?Mousetrap.bind(a,q(c),d):Mousetrap.bind(a,q(c));var o=new i(a,b,c,d,e,f,g);return s.hotkeys.push(o),o}function n(a){var b=a instanceof i?a.combo:a;if(Mousetrap.unbind(b),angular.isArray(b)){for(var c=!0,d=b.length;d--;)c=n(b[d])&&c;return c}var e=s.hotkeys.indexOf(o(b));return e>-1?(s.hotkeys[e].combo.length>1?s.hotkeys[e].combo.splice(s.hotkeys[e].combo.indexOf(b),1):(angular.forEach(t,function(a){var b=a.indexOf(s.hotkeys[e]);-1!==b&&a.splice(b,1)}),s.hotkeys.splice(e,1)),!0):!1}function o(a){if(!a)return s.hotkeys;for(var b,c=0;c<s.hotkeys.length;c++)if(b=s.hotkeys[c],b.combo.indexOf(a)>-1)return b;return!1}function p(a){return a.$id in t||(t[a.$id]=[],a.$on("$destroy",function(){for(var b=t[a.$id].length;b--;)n(t[a.$id].pop())})),{add:function(b){var c;return c=arguments.length>1?m.apply(this,arguments):m(b),t[a.$id].push(c),this}}}function q(a){return function(c,d){if(a instanceof Array){var e=a[0],f=a[1];a=function(a){f.scope.$eval(e)}}b.$apply(function(){a(c,o(d))})}}var r=!0;Mousetrap.prototype.stopCallback=function(a,b){return r?(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:b.contentEditable&&"true"==b.contentEditable:!0},i.prototype.format=function(){if(null===this._formated){for(var a=this.combo[0],b=a.split(/[\s]/),c=0;c<b.length;c++)b[c]=h(b[c]);this._formated=b}return this._formated};var s=b.$new();s.hotkeys=[],s.helpVisible=!1,s.title=this.templateTitle,s.header=this.templateHeader,s.footer=this.templateFooter,s.toggleCheatSheet=l,s.defaultCategoryName=this.defaultCategoryName;var t={};if(this.useNgRoute&&b.$on("$routeChangeSuccess",function(a,b){j(),b&&b.hotkeys&&angular.forEach(b.hotkeys,function(a){var c=a[2];("string"==typeof c||c instanceof String)&&(a[2]=[c,b]),a[5]=!1,m.apply(this,a)})}),this.includeCheatSheet){var u=e[0],v=a[0],w=angular.element(this.template);m(this.cheatSheetHotkey,this.cheatSheetDescription,l),v!==u&&v!==u.documentElement||(v=u.body),angular.element(v).append(c(w)(s))}var x=!1,y={add:m,del:n,get:o,bindTo:p,template:this.template,toggleCheatSheet:l,includeCheatSheet:this.includeCheatSheet,defaultCategoryName:this.defaultCategoryName,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:j,templateTitle:this.templateTitle,pause:f,unpause:g};return y}]}]).directive("hotkey",["hotkeys",function(a){return{restrict:"A",link:function(b,c,d){var e,f=[];angular.forEach(b.$eval(d.hotkey),function(b,c){e="string"==typeof d.hotkeyAllowIn?d.hotkeyAllowIn.split(/[\s,]+/):[],f.push(c),a.add({combo:c,description:d.hotkeyDescription,callback:b,action:d.hotkeyAction,allowIn:e})}),c.bind("$destroy",function(){angular.forEach(f,a.del)})}}}]).run(["hotkeys",function(a){}])}();